# 角色管理功能说明

## 功能概述

角色管理模块是酒店管理系统的重要组成部分，用于管理系统的角色权限和用户分配。该模块提供了完整的角色 CRUD 操作，以及角色与用户的关联管理。

## 主要功能

### 1. 角色列表管理
- **查看角色列表**：显示所有角色的基本信息
- **搜索功能**：支持按角色名称或描述进行模糊搜索
- **角色卡片展示**：以卡片形式展示角色信息，包括名称、描述、用户数量等

### 2. 角色操作
- **创建角色**：添加新的角色，设置角色名称和描述
- **编辑角色**：修改现有角色的信息
- **删除角色**：删除不需要的角色（带确认提示）
- **查看详情**：查看角色的详细信息和关联用户

### 3. 用户关联管理
- **添加用户**：为角色分配用户
- **移除用户**：从角色中移除用户
- **用户列表**：显示角色关联的所有用户

## 技术实现

### API 接口
基于 OpenAPI 3.0 规范，实现了以下接口：
- `POST /role/create` - 创建角色
- `POST /role/update` - 更新角色
- `POST /role/delete` - 删除角色
- `POST /role/list` - 获取角色列表

### 前端组件
- **RoleManagement.tsx**：主页面组件
- **roleApi.ts**：角色管理 API 接口封装
- **类型定义**：完整的 TypeScript 类型支持

### 公共组件复用
- **UserSelectorModal**：用户选择弹窗
- **ConfirmModal**：确认操作弹窗
- **ToastProvider**：消息提示组件

## 页面结构

### 角色列表页面
- 顶部搜索栏
- 角色卡片网格布局
- 每个卡片包含：角色名称、描述、用户数量、操作按钮

### 角色详情页面
- 角色基本信息展示
- 关联用户列表
- 添加/移除用户功能

### 角色编辑弹窗
- 角色名称输入
- 角色描述文本域
- 保存/取消操作

## 数据流程

1. **页面加载**：自动获取角色列表
2. **搜索操作**：根据关键词过滤角色
3. **创建角色**：填写表单 → 调用 API → 刷新列表
4. **编辑角色**：预填充表单 → 修改数据 → 调用 API → 刷新列表
5. **删除角色**：确认操作 → 调用 API → 刷新列表
6. **用户管理**：选择用户 → 更新角色关联 → 刷新详情

## 错误处理

- **网络错误**：显示友好的错误提示
- **表单验证**：必填字段验证
- **操作确认**：危险操作需要用户确认
- **加载状态**：操作过程中显示加载指示器

## 用户体验

- **响应式设计**：支持不同屏幕尺寸
- **直观操作**：清晰的按钮和图标
- **即时反馈**：操作成功/失败的即时提示
- **数据一致性**：操作后自动刷新相关数据

## 扩展性

该模块设计具有良好的扩展性：
- 可以轻松添加菜单权限管理
- 支持角色继承和权限组合
- 可以集成更复杂的权限控制逻辑
- 支持批量操作和导入导出功能

## 使用说明

1. 进入角色管理页面
2. 使用搜索功能查找特定角色
3. 点击"添加角色"创建新角色
4. 点击角色卡片上的操作按钮进行编辑或删除
5. 点击"查看详情"进入角色详情页面
6. 在详情页面管理角色的用户关联
